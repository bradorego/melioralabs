!function(e){"use strict";e("body").vide({mp4:"mp4/bg.mp4",poster:"img/bg-mobile-fallback.jpg"},{className:"bg-video",posterType:"jpg"});let t=e("#participants"),a=e("#part-output"),i=e("#design"),s=e("#recruit"),n=e("#session"),l=e("#analysis"),r=e("#total"),o=e("#part-plus"),c=e("#ml-form"),p=e("#upsell"),d=window.innerWidth>=1200?"xl":window.innerWidth>=922?"lg":window.innerWidth>=768?"md":window.innerWidth>=576?"sm":"xs",m=e(".masthead").eq(0),u=e("section"),h={mainText:{hit:!1,distance:u.get(0).offsetTop},pricing:{hit:!1,distance:u.get(1).offsetTop},customers:{hit:!1,distance:u.get(2).offsetTop},faq:{hit:!1,distance:u.get(3).offsetTop},cta:{hit:!1,distance:u.get(4).offsetTop},bottom:{hit:!1,distance:m[0].scrollHeight-m.height()}},g=e(".mp-track-click"),b=()=>{let e=t.val(),a=25*e;return a+=e*(i.prop("checked")?100:0),a+=e*(s.prop("checked")?50:0),a+=e*(n.prop("checked")?25:0),a+=e*(l.prop("checked")?100:0)},f=()=>{t.val()<30?(o.hide(),r.text(`$${b()}`)):(o.show(),r.text("Let's Talk"))},k=(t,a,i)=>{let s=t.val(),n=function(){i.html("<div class='alert alert-success mt-3'>\n              <button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;</button>\n              Thanks for your interest! We'll follow up with you soon.\n            </div>"),t.val(""),mixpanel.track("sendEmail",{status:"success"})};i.on("click",e=>{e.target.className.includes("close")&&(i.html(""),i.off("click"))}),mixpanel.track("sendEmail",{status:"beforeSend"}),s?(i.html(""),i.off("click"),e.ajax({url:"https://api.sendgrid.com/api/mail.send.json",type:"GET",data:{api_user:"melioralabs",api_key:"TestWord1",to:"brad@melioralabs.com",from:s,subject:"MelioraLabs Inquiry",html:a},dataType:"jsonp",cache:!1,success:n,error:function(e){if(console.log(e),200===e.status)return n();i.html("\n              <div class='alert alert-danger mt-3'>\n                <button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times</button>\n                Whoops! Looks like something went wrong. If the problem persists, please email <a href='mailto:hello@melioralabs.com?subject=Your%20Site%20Is%20Broken'>hello@melioralabs.com</a>.\n              </div>"),mixpanel.track("sendEmail",{status:"fail"})}})):(i.html("\n            <div class='alert alert-danger mt-3'>\n              <button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times</button>\n              Email Address required. We need a way to get in contact with you :)\n            </div>"),mixpanel.track("sendEmail",{status:"no-email"}))};e("#ml-submit").click(()=>{c.submit()}),p.submit(e=>{e.preventDefault(),e.stopPropagation();let t=p.find("input[type=email]"),a=p.find(".success");k(t,"I want to chat more about ML.",a)}),c.submit(a=>{a.preventDefault(),a.stopPropagation();let r=e("#email"),o=c.parent().find(".success");k(r,`\n      Email: ${r.val()}<br/>\n      Participants: ${t.val()}<br/>\n      Lab: true<br/>\n      Design: ${i.prop("checked")}<br/>\n      Recruit: ${s.prop("checked")}<br/>\n      Run: ${n.prop("checked")}<br/>\n      Analyze: ${l.prop("checked")}<br/>\n      Total: $${b()}\n    `,o)}),mixpanel.register({page:window.location.pathname,device:d}),mixpanel.track("pageview"),t.on("input",e=>{t.val()<5&&t.val(5),a.text(t.val()),f()}),t.change(()=>{mixpanel.track("change",{target:"participant-slider",value:t.val()})}),i.change(f),s.change(f),n.change(f),l.change(f),e("a").click(e=>{e.preventDefault();let t=e.target.href;for(;void 0===t;)e.target=e.target.parentElement,t=e.target.href;mixpanel.track("click",{href:t}),window.open(t)}),g.click(e=>{let t=e.target.dataset.mpValue;for(;void 0===t;)e.target=e.target.parentElement,t=e.target.dataset.mpValue;mixpanel.track("click",{target:t})}),m.scroll(()=>{e.each(h,(e,t)=>{m.scrollTop()>t.distance&&!t.hit&&(mixpanel.track("scroll",{item:e}),t.hit=!0)})})}(jQuery);